<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impostazioni | FitSuite</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="./impostazioni.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyCEgbB9rBBKOov3aDma0DMn-EuU0bGMMYo",
        authDomain: "fitsuite-a7b6c.firebaseapp.com",
        projectId: "fitsuite-a7b6c",
        storageBucket: "fitsuite-a7b6c.firebasestorage.app",
        messagingSenderId: "721614273457",
        appId: "1:721614273457:web:195f48279fafd01a1f5b90",
        measurementId: "G-W4ME455MH5"
      };
      firebase.initializeApp(firebaseConfig);
    </script>
</head>
<body class="settings-body">
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div class="user-avatar-small" id="user-initial-sidebar">U</div>
                    <span class="user-name-sidebar" id="user-name-sidebar">User12345</span>
                    <i class="fas fa-bell notification-icon"></i>
                </div>
            </div>
            
            <button class="new-routine-btn" onclick="window.location.href='../crea_scheda/crea_scheda.html'">
                <i class="fas fa-plus"></i> Nuova Scheda
            </button>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">
                        <i class="fas fa-list-ul"></i> Schede di base
                    </div>
                    <ul class="routine-list" id="routine-list-sidebar">
                        <li>Scheda Mario</li>
                        <li>Scheda Mario</li>
                        <li>Scheda Mario</li>
                    </ul>
                </div>
            </nav>

            <div class="sidebar-footer">
                <a href="./impostazioni.html" class="nav-item active">
                    <i class="fas fa-cog"></i> Impostazioni
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <h1>Impostazioni</h1>
            </header>

            <div class="settings-container">
                <div class="user-profile-large">
                    <div class="user-avatar-large" id="user-initial-main">U</div>
                    <div class="user-email-main" id="user-email-main">mario_rossi59@gmail.com</div>
                </div>

                <!-- Account Section -->
                <section class="settings-card glow-card">
                    <h2 class="card-title">Account</h2>
                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-lock row-icon"></i>
                            <div>
                                <span class="row-label">Password</span>
                                <span class="row-value">**********</span>
                            </div>
                        </div>
                        <button class="card-btn" id="change-password-btn">Cambia Password</button>
                    </div>
                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-phone row-icon"></i>
                            <div>
                                <span class="row-label">Numero di telefono</span>
                                <span class="row-value" id="user-phone">+39 224 124 6747</span>
                            </div>
                        </div>
                        <button class="card-btn" id="change-phone-btn">Cambia Telefono</button>
                    </div>
                    <div class="card-footer-action">
                        <p class="action-hint">Se procedi con l'eliminazione dell'account, perderai tutti i tuoi dati</p>
                        <button class="delete-account-btn-styled" id="delete-account-trigger">Elimina Account</button>
                    </div>
                </section>

                <!-- Preferenze Section -->
                <section class="settings-card glow-card">
                    <h2 class="card-title">Preferenze</h2>
                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-palette row-icon"></i>
                            <div>
                                <span class="row-label">Colori</span>
                                <span class="row-value" id="current-color">Arancione</span>
                            </div>
                        </div>
                        <div class="color-options">
                            <span class="color-dot orange active"></span>
                            <span class="color-dot green"></span>
                            <span class="color-dot blue"></span>
                            <span class="color-dot pink"></span>
                        </div>
                    </div>
                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-flag row-icon"></i>
                            <div>
                                <span class="row-label">Lingua predefinita esercizi</span>
                                <span class="row-value" id="user-language">Italiano</span>
                            </div>
                        </div>
                        <button class="card-btn">Cambia Preferenze</button>
                    </div>
                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-bell row-icon"></i>
                            <div>
                                <span class="row-label">Comunicazioni offerte e novità</span>
                                <span class="row-value" id="user-notifications">Consenti tutti</span>
                            </div>
                        </div>
                        <button class="card-btn">Cambia Preferenze</button>
                    </div>
                </section>

                <!-- Abbonamento Section -->
                <section class="settings-card glow-card">
                    <h2 class="card-title">ABBONAMENTO</h2>
                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-calendar-alt row-icon"></i>
                            <div>
                                <span class="row-label">Scadenza Abbonamento</span>
                                <span class="row-value" id="subscription-expiry">24/12/2024</span>
                            </div>
                        </div>
                        <button class="card-btn" id="edit-subscription-expiry">Modifica</button>
                    </div>
                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-credit-card row-icon"></i>
                            <div>
                                <span class="row-label">Metodo di Pagamento</span>
                                <span class="row-value" id="payment-method">**** **** **** 1234</span>
                            </div>
                        </div>
                        <button class="card-btn" id="edit-payment-method">Modifica</button>
                    </div>
                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-history row-icon"></i>
                            <div>
                                <span class="row-label">Storico Fatturazione</span>
                                <a href="#" class="row-value-link" id="billing-history-link">Visualizza</a>
                            </div>
                        </div>
                        <button class="card-btn primary">Visualizza</button>
                    </div>
                    <div class="card-footer-action">
                        <button class="delete-account-btn-styled" id="cancel-subscription-btn">Annulla Abbonamento</button>
                    </div>
                </section>

                <!-- Supporto Section -->
                <section class="settings-card glow-card">
                    <h2 class="card-title">Supporto</h2>
                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-envelope row-icon"></i>
                            <div>
                                <span class="row-label">E-mail assistenza</span>
                                <span class="row-value">Fitsuite.company@gmail.com</span>
                            </div>
                        </div>
                        <button class="card-btn primary">Contattaci</button>
                    </div>

                    <div class="card-row">
                        <div class="row-info">
                            <i class="fas fa-comment-alt row-icon"></i>
                            <div>
                                <span class="row-label">Dacci la tua opinione</span>
                                <span class="row-value">Come possiamo migliorare?</span>
                            </div>
                        </div>
                        <button class="card-btn primary">Dicci la Tua!</button>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Modal di conferma eliminazione -->
    <div id="delete-confirm-modal" class="modal">
        <div class="modal-content">
            <h3>Sei sicuro?</h3>
            <p>Questa azione non può essere annullata. Tutti i tuoi dati verranno eliminati permanentemente.</p>
            <div class="modal-actions">
                <button id="cancel-delete" class="modal-btn-secondary">Annulla</button>
                <button id="confirm-delete" class="modal-btn-danger">Sì, elimina</button>
            </div>
        </div>
    </div>

    <!-- Modal di modifica abbonamento -->
    <div id="subscription-edit-modal" class="modal">
        <div class="modal-content">
            <h3>Modifica Dati Sensibili</h3>
            <p>Per procedere con la modifica dei dati sensibili, ti invieremo una mail di sicurezza all'indirizzo associato al tuo account.</p>
            <div class="modal-actions">
                <button id="cancel-subscription-edit" class="modal-btn-secondary">Annulla</button>
                <button id="send-security-email" class="modal-btn-primary">Invia Email</button>
            </div>
        </div>
    </div>

    <script src="./impostazioni.js"></script>
</body>
</html>